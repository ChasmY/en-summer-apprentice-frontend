/*! For license information please see host.js.LICENSE.txt */
!function(){var e={7501:function(e,t,r){var n;e=r.nmd(e),function(a){var o=(e&&e.exports,"object"==typeof r.g&&r.g);o.global!==o&&o.window;var i=function(e){this.message=e};(i.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new i(e)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,l={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,a,o=e.length%3,i="",c=-1,l=e.length-o;++c<l;)t=e.charCodeAt(c)<<16,r=e.charCodeAt(++c)<<8,n=e.charCodeAt(++c),i+=d.charAt((a=t+r+n)>>18&63)+d.charAt(a>>12&63)+d.charAt(a>>6&63)+d.charAt(63&a);return 2==o?(t=e.charCodeAt(c)<<8,r=e.charCodeAt(++c),i+=d.charAt((a=t+r)>>10)+d.charAt(a>>4&63)+d.charAt(a<<2&63)+"="):1==o&&(a=e.charCodeAt(c),i+=d.charAt(a>>2)+d.charAt(a<<4&63)+"=="),i},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,a=0,o="",i=-1;++i<t;)n=d.indexOf(e.charAt(i)),r=a%4?64*r+n:n,a++%4&&(o+=String.fromCharCode(255&r>>(-2*a&6)));return o},version:"1.0.0"};void 0===(n=function(){return l}.call(t,r,t,e))||(e.exports=n)}()},7057:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};t.__esModule=!0,t.createDispatcher=void 0,t.createDispatcher=function(e,t,n){var a=null,o=n?[{}]:[],i=n?{0:n}:{};function s(e,t,r){e.postMessage({source:"dst",type:t,payload:r},"*")}return{registerPayload:function(e){return o.push(e)-1},registerIframe:function(t,r,n){n||e.appendChild(t),i[r]=t},unregisterIframe:function(t){var r=i[t];r&&(r.parentElement===e&&e.removeChild(r),delete i[t])},sendPayload:function(e){var n=o[e],a=i[e];(null==a?void 0:a.contentWindow)&&s(null==a?void 0:a.contentWindow,"payload",r(r({},n),{apiKey:t}))},setFrameHeight:function(e,t){var r=i[e];r&&(r.style.height=t+10+"px")},propagateEvent:function(e,t){o.forEach((function(r,n){var a,o=i[n];null===(a=null==o?void 0:o.contentWindow)||void 0===a||a.postMessage({source:"dst",type:"interframe-event",payload:t,eventType:e},"*")}))},sendSharedData:function e(t){null===a?setTimeout((function(){return e(t)}),100):s(t,"shared-data",r(r({},a),{hostUrl:document.location.href}))},setSharedData:function(e){a=e},sendHostUrl:function(e){s(e,"send-host-url",{hostUrl:document.location.href})}}}},7978:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};t.__esModule=!0,t.createFrame=void 0,t.createFrame=function(e,t){var n=r({border:"none",width:"0px",height:"0px",overflow:"hidden"},t),a=document.createElement("iframe");return a.frameBorder="0",a.style.border=n.border,a.style.width=n.width,a.style.height=n.height,a.style.overflow=n.overflow,a.src="https://content.digitaldisbursements.com/v1.4.3"+e,a}},2011:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.registerLegacyAPI=void 0;var a,o,i=n(r(7501)),s=r(5473),d=r(7057),c=r(7978),l=r(4001),u=r(623),f=(0,s.createLogger)("host");t.registerLegacyAPI=function(){f.info("Registering legacy API");var e=window;e._dstUnregister&&e._dstUnregister(),e.dstPaymentForm=function(t,r,n){var s={cid:"",lastName:"",ln:"en",sc:!1,verify:!0,paperCheck:"link",acceptCompanyName:!1,choiceConsent:!1,country:"",flow:""},f=("object"==typeof r?r:n)||s,h="function"==typeof r?r:void 0,p=t.getAttribute("key");a&&a.parentElement===t&&t.removeChild(a);var g=Object.keys(s),m={};Object.keys(f).forEach((function(e){var t=f[e];-1===g.indexOf(e)||"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(m[e]=t)}));var y=f.texts||{};function v(e){(o=(0,c.createFrame)("/widget.html?"+encodeURIComponent(e)+"&"+encodeURIComponent(p)+"&"+encodeURIComponent(JSON.stringify(m)),{width:"100%",height:"100%"})).style.left="0",o.style.top="0",o.style.position="fixed",o.style.backgroundColor="transparent",o.style.zIndex="999",t.appendChild(o)}a=(0,c.createFrame)("/index.html?"+encodeURIComponent(p)+"&"+encodeURIComponent(JSON.stringify(m)),{width:"100%"}),t.appendChild(a),(0,u.createSharedDataFrame)(t,p,m);var w=(0,d.createDispatcher)(t,p,a),b=function(e){if("dst"===e.data.source){if(a.parentElement!==t)return;switch(e.data.type){case"get-options":e.source&&e.source.postMessage({type:"send-options",texts:y[e.data.ln||"en"],theme:f.theme||{},sortOrder:f.sortOrder||[],tracker:f.tracker||"",config:f.config||{}},"*");break;case"methods-displayed":f.onMethodsDisplayed&&f.onMethodsDisplayed(e.data.country);break;case"method-selected":v(i.default.encode(encodeURIComponent(JSON.stringify({method:e.data.value,cid:e.data.cid,lastName:e.data.lastName,country:e.data.country,fee:e.data.fee,options:JSON.stringify(m)})))),f.onDialogDisplayed&&f.onDialogDisplayed(e.data.value);break;case"close":o&&o.parentElement===t&&(t.removeChild(o),o=null),f.onDialogClosed&&f.onDialogClosed(e.data.submitted);break;case"data-collected":a.contentWindow&&a.contentWindow.postMessage(e.data,"*"),e.data.info.token&&(h&&h(e.data.info),f.onSubmitted&&f.onSubmitted(e.data.info));break;case"info-popup":v(i.default.encode(encodeURIComponent(JSON.stringify({info:e.data.method}))));break;default:(0,l.handlePayload)(w,e)}}};window.addEventListener("message",b),e._dstUnregister=function(){window.removeEventListener("message",b)}}}},4001:function(e,t,r){"use strict";t.__esModule=!0,t.handlePayload=void 0;var n=r(7978);t.handlePayload=function(e,t){switch(t.data.type){case"popup":var r=t.data,a=r.flow,o=r.params,i=e.registerPayload({flow:a,params:o}),s=(0,n.createFrame)("/flow.html?"+encodeURIComponent(i),{width:"100%",height:"100%"});return s.style.left="0",s.style.top="0",s.style.position="fixed",s.style.backgroundColor="transparent",s.style.zIndex="999",void e.registerIframe(s,i);case"close-popup":return e.unregisterIframe(t.data.index);case"request-payload":return e.sendPayload(t.data.index);case"get-shared-data":return e.sendSharedData(t.source);case"set-shared-data":return e.setSharedData(t.data.payload);case"set-height":return e.setFrameHeight(t.data.index,t.data.height);case"interframe-event":return e.propagateEvent(t.data.eventType,t.data.payload);case"get-host-url":return e.sendHostUrl(t.source);case"redirect":return void(document.location=t.data.url)}}},623:function(e,t,r){"use strict";t.__esModule=!0,t.createSharedDataFrame=void 0;var n=r(7978),a=null;t.createSharedDataFrame=function(e,t,r){a&&a.parentElement&&a.parentElement.removeChild(a),a=(0,n.createFrame)("/index.html?"+encodeURIComponent(t)+"&"+encodeURIComponent(JSON.stringify({params:r,flow:"shared-data"}))),e.appendChild(a)}},3239:function(e,t,r){"use strict";t.__esModule=!0,t.registerApi=void 0;var n=r(5473),a=r(7057),o=r(7978),i=r(4001),s=r(623);t.registerApi=function(){var e=window;e._dstUnregisterTags&&e._dstUnregisterTags(),e.dstTags=function(t){var r=document.getElementsByTagName("body")[0];if(r){var d=(0,a.createDispatcher)(r,t.key);(0,s.createSharedDataFrame)(r,t.key,{ln:t.ln,country:t.country}),Array.from(document.getElementsByTagName("dst")).forEach((function(t){var r=d.registerPayload({flow:"magic-tag",params:Object.fromEntries(Array.from(t.attributes).map((function(e){return[e.name,e.value]})))}),n=(0,o.createFrame)("/flow.html?"+encodeURIComponent(r),{width:"100%",height:"0"});t.insertAdjacentElement("afterend",n),d.registerIframe(n,r,!0);var a=function(e){"dst"===e.data.source&&(0,i.handlePayload)(d,e)};window.addEventListener("message",a),e._dstUnregisterTags=function(){window.removeEventListener("message",a)}}))}else n.defaultLog.error("No BODY element")}}},5473:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};t.__esModule=!0,t.defaultLog=t.createLogger=void 0;var n=window,a=["fatal","error","warning","info","debug"],o=[console.error,console.error,console.warn,console.warn,console.warn];function i(e,t){var i=a.indexOf(t),s=o[i];return function(){for(var o=[],d=0;d<arguments.length;d++)o[d]=arguments[d];var c=a.indexOf((null==n?void 0:n.__dstWidgetLogLevel)||"error");if(i<=c&&s){var l=new Date;s.apply(void 0,r(["[".concat(l.toISOString().substring(11,23),"] [").concat(t,"]"),e?"[".concat(e,"]"):""],o,!1))}}}function s(e){return Object.freeze({debug:function(){},info:i(e,"info"),warning:i(e,"warning"),error:i(e,"error"),fatal:i(e,"fatal")})}t.createLogger=s,t.defaultLog=s("")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=r(5473),t=r(2011),n=r(3239),a=(0,e.createLogger)("host");a.info("Registering APIs"),(0,t.registerLegacyAPI)(),(0,n.registerApi)(),a.info("Registered APIs")}()}();
//# sourceMappingURL=host.js.map